---
title: Task sequence built-in variables | Microsoft Docs
description: "Task sequence built-in variables provide information about the environment where the task sequence runs and are available during the whole task sequence."
ms.custom: na
ms.date: 03/26/2017
ms.prod: configuration-manager
ms.reviewer: na
ms.suite: na
ms.technology:
  - configmgr-osd
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 02bc6bd4-ca53-4e22-8b80-d8ee5fe72567
caps.latest.revision: 15
caps.handback.revision: 0
author: Dougeby
ms.author: dougeby
manager: angrobe

---
# Task sequence built-in variables in System Center Configuration Manager

*Applies to: System Center Configuration Manager (Current Branch)*


 Task sequence built-in variables are provided by System Center Configuration Manager. Built-in variables provide information about the environment where the task sequence is running, and their values are available throughout the whole task sequence. Typically, built-in variables are initialized before steps are run in the task sequence. For example, the built-in variable **_SMSTSLogPath** is an environment variable that specifies the path that Configuration Manager components use to write log files while the task sequence runs; any task sequence step can access this environment variable. However, some variables, such as &#95;SMSTSCurrentActionName, are evaluated before each step. The values of built-in variables are generally read-only. The values are read only for built-in variables with a name that begins with an underscore.  

## Task Sequence Built-in Variable List  
 The following list describes the built-in variables that are available in Configuration Manager:  

|Built-in Variable Name|Description|  
|-----------------------------|-----------------|  
|_OSDDetectedWinDir|Beginning in Configuration Manager version 1602, the task sequence scans the computer's hard drives for a previous operating system installation when Windows PE starts. The Windows folder location is stored in this variable. You can configure your task sequence to retrieve this value from the environment and use it to specify the same Windows folder location to use for the new operating system installation.|  
|_OSDDetectedWinDrive|Beginning in Configuration Manager version 1602, the task sequence scans the computer's hard drives for a previous operating system installation when Windows PE starts.  The hard drive location for where the operating system is installed is stored in this variable. You can configure your task sequence to retrieve this value from the environment and use it to specify the same hard drive location to use for the new operating system.|  
|_SMSTSAdvertID|Stores the current running task sequence deployment unique ID. It uses the same format as a Configuration Manager software distribution deployment ID. If the task sequence is running from stand-alone media, this variable is undefined.<br /><br /> Example:<br /><br /> **ABC20001**|  
|_TSAppInstallStatus|The task sequence sets the _TSAppInstallStatus variable with the installation status for the application during the Install Application task sequence step. The task sequence sets the variable with one of the following values:<br /><br /> 1.  **Undefined**: Set when the Install Application task sequence step has not been run.<br />2.  **Error**: Set when at least one application failed because of an error during the Install Application task sequence step.<br />3.  **Warning**: Set when no errors occur during the Install Application task sequence step, but one or more applications, or a required dependency, did not install because a requirement was not met.<br />4.  **Success**: Set when there are no errors or warning detected during the Install Application task sequence step.|  
|_SMSTSBootImageID|Stores the Configuration Manager boot image package ID if a boot image package is associated with the current running task sequence. The variable will not be set if no Configuration Manager boot image package is associated.<br /><br /> Example:<br /><br /> **ABC00001**|  
|_SMSTSBootUEFI|The task sequence sets the SMSTSBootUEFI variable when it detects a computer that is in UEFI mode.|  
|_SMSTSClientGUID|Stores the value of Configuration Manager client GUID. This variable is not set if the task sequence is running from stand-alone media.<br /><br /> Example:<br /><br /> **0a1a9a4b-fc56-44f6-b7cd-c3f8ee37c04c**|  
|_SMSTSCurrentActionName|Specifies the name of the currently running task sequence step. This variable is set before the task sequence manager runs each individual step.<br /><br /> Example:<br /><br /> **run command line**|  
|_SMSTSDownloadOnDemand|Set to **true** if the current task sequence is running in download-on-demand mode, which means the task sequence manager downloads content locally only when it must access the content.|  
|_SMSTSInWinPE|This variable is set to **true** when the current task sequence step is running in the Windows PE environment, and it is set to **false** if not. You can test this task sequence variable to determine the current operating system environment.|  
|_SMSTSLastActionRetCode|Stores the return code that was returned by the last action that was run. This variable can be used as a condition to determine if the next step is run.<br /><br /> Example:<br /><br /> **0**|  
|_SMSTSLastActionSucceeded|The variable is set to **true** if the last action succeeded and to **false** if the last action failed. If the last action was skipped because the step was disabled or the associated condition evaluated to **false**, this variable is not reset, which means it still holds the value for the previous action.|  
|_SMSTSLaunchMode|Specifies the task sequence launch method. The task sequence can have the following values:<br /><br /> -   **SMS** - specifies that the task sequence is started by using the Configuration Manager client.<br />-   **UFD** - specifies that the task sequence is started by using USB media and that the USB media was created in Windows XP/2003.<br />-   **UFD+FORMAT** - specifies that the task sequence is started by using USB media and that the USB media was created in Windows Vista or later.<br />-   **CD** - specifies that the task sequence is started by using a CD.<br />-   **DVD** - specifies that the task sequence is started by using a DVD.<br />-   **PXE** - specifies that the task sequence is started from PXE.<br />-   **HD** - specifies that the task sequence was started from a hard disk (prestaged media only).|  
|_SMSTSLogPath|Stores the full path of the log directory. This can be used to determine where actions are logged. This value is not set when a hard drive is not available.|  
|_SMSTSMachineName|Stores and specifies the computer name. Stores the name of the computer that the task sequence will use to log all status messages. To change the computer name in the new operating system, use the **OSDComputerName** variable.<br /><br /> Example:<br /><br /> **ABC**|  
|_SMSTSMDataPath|Specifies the path defined by the SMSTSLocalDataDrive variable. When you define SMSTSLocalDataDrive before the task sequence starts, such as by setting a collection variable, Configuration Manager then defines the _SMSTSMDataPath variable once the Task Sequence starts.|  
|_SMSTSMediaType|Specifies the type of media that is used to initiate the installation. Examples of types of media are Boot Media, Full Media, PXE, and Prestaged Media.|  
|_SMSTSMP|Stores the URL or IP address of a Configuration Manager management point.|  
|_SMSTSMPPort|Stores the management point port number of a Configuration Manager management point.<br /><br /> Example:<br /><br /> **80**|  
|_SMSTSOrgName|Stores the branding title name that is displayed in a task sequence progress user interface dialog box.<br /><br /> Example:<br /><br /> **XYZ Organization**|  
|_SMSTSOSUpgradeActionReturnCode|Stores the exit code value returned from Setup to indicate success or failure.  This variable is set during the task sequence steps Operating System Upgrade task sequence step. This is useful with the /Compat Windows 10 Setup command-line option.<br /><br /> Example:<br /><br /> On the completion of /Compat, you can take actions in later steps depending on the failure or success exit code. On success, you could initiate the upgrade. Or, you could  set a marker in the environment (for example, add a file or  set a registry key) that can then be used to create a collection of computers that are ready to upgrade or that require action before they are upgraded.|  
|_SMSTSPackageID|Stores the current running task sequence ID. This ID uses the same format as a Configuration Manager software package ID.<br /><br /> Example:<br /><br /> **HJT00001**|  
|_SMSTSPackageName|Stores the current running task sequence name specified by the Configuration Manager administrator when the task sequence is created.<br /><br /> Example:<br /><br /> **Deploy Windows 10 task sequence**|  
|_SMSTSSetupRollback|Specifies whether the operating system Setup performed a rollback operation. The variable values can be **true** or **false**.|  
|_SMSTSRunFromDP|Set to **true** if the current task sequence is running in run-from-distribution-point mode, which means the task sequence manager obtains required package shares from distribution point.|  
|_SMSTSSiteCode|Stores the site code of the Configuration Manager site.<br /><br /> Example:<br /><br /> **ABC**|  
|_SMSTSType|Specifies the type of the current running task sequence. It can have the following values:<br /><br /> **1** - indicates a generic task sequence.<br /><br /> **2** - indicates an operating system deployment task sequence.|  
|_SMSTSTimezone|The _SMSTSTimezone variable stores the time zone information in the following format (without spaces):<br /><br /> Bias, StandardBias, DaylightBias, StandardDate.wYear, wMonth, wDayOfWeek, wDay, wHour, wMinute, wSecond, wMilliseconds, DaylightDate.wYear, wMonth, wDayOfWeek, wDay, wHour, wMinute, wSecond, wMilliseconds, StandardName, DaylightName<br /><br /> Example:<br /><br /> For the Eastern Time U.S. and Canada, the value would be **300,0,-60,0,11,0,1,2,0,0,0,0,3,0,2,2,0,0,0,Eastern Standard Time,Eastern Daylight Time**|  
|_SMSTSUseCRL|Specifies whether the task sequence uses the certificate revocation list when it uses a Secure Socket Layer (SSL) certificate to communicate with the management point.|  
|_SMSTSUserStarted|Specifies whether a task sequence is started by a user. This variable is set only if the task sequence is started from the Software Center. For example, if **_SMSTSLaunchMode** is set to **SMS**. The variable can have the following values:<br /><br /> -   **true** - specifies that the task sequence is manually started by a user from the Software Center.<br />-   **false** - specifies that the task sequence is initiated automatically by the Configuration Manager scheduler.|  
|_SMSTSUseSSL|Specifies whether the task sequence uses SSL to communicate with the Configuration Manager management point. If your site is running in native mode, the value is set to **true**.|  
|_SMSTSWTG|Specifies if the computer is running as a Windows To Go device.|  
|OSDPreserveDriveLetter|Beginning in Configuration Manager version 1606, this task sequence variable has been deprecated. During an operating system deployment, by default, Windows Setup determines the best drive letter to use (typically C:). <br /><br />In previous versions, the OSDPreverveDriveLetter variable determines whether or not the task sequence uses the drive letter captured in the operating system image WIM file when applying that image to a destination computer. You can set the value for this variable to **False** to use the location that you specify for the **Destination** setting in the **Apply Operating System** task sequence step. For more information, see [Apply Operating System Image](task-sequence-steps.md#BKMK_ApplyOperatingSystemImage).|  
|OSDSetupAdditionalUpgradeOptions|Beginning in Configuration Manager version 1602, you can use this variable to specify additional options for Windows Setup upgrade.
|SMSTSAssignmentsDownloadInterval|Use this variable to specify the number of seconds to wait before the client will attempt to download the policy since the last attempt (which returned no policies). By default, the client will wait **0** seconds before retrying.<br /><br /> You can set this variable by using a prestart command from media or PXE.|  
|SMSTSAssignmentsDownloadRetry|Use this variable to specify the number of times a client will attempt to download the policy after no policies are found on the first attempt. By default, the client will retry **0** times.<br /><br /> You can set this variable by using a prestart command from media or PXE.|  
|SMSTSAssignUsersMode|Specifies how a task sequence associates users with the destination computer. Set the variable to one of the following values.<br /><br /> -   Auto: The task sequence creates a relationship between the specified users and destination computer when it deploys the operating system to the destination computer.<br />-   Pending: The task sequence creates a relationship between the specified users and the destination computer, but waits for approval from the administrative user before the relationship is set.<br />-   Disabled: The task sequence does not associate users with the destination computer when it deploys the operating system.|  
|SMSTSDownloadAbortCode|This variable contains the abort code value for the external program downloader (specified in the SMSTSDownloadProgram variable). If the program returns an error code equal to the value of the SMSTSDownloadAbortCode variable, then the content download fails and no other download method is attempted.
|SMSTSDownloadProgram|Use this variable to specify an Alternate Content Provider, a downloader program that is used to download content instead of the default Configuration Manager downloader, for the task sequence. As part of the content download process, the task sequence checks the variable for a specified downloader program. If specified, the task sequence runs the program to perform the download.|  
|SMSTSDownloadRetryCount|Use this variable to specify the number of times that Configuration Manager attempts to download content from a distribution point. By default, the client will retry **2** times.|  
|SMSTSDownloadRetryDelay|Use this variable to specify the number of seconds that Configuration Manager waits before it retries to download content from a distribution point. By default, the client will wait **15** seconds before retrying.|  
|SMSTSDriverReceiveTimeOut|Use this variable to specify the number of seconds before the connection to the server times out.|
|SMSTSDriverRequestConnectTimeOut|Use this variable to specify the number of seconds to wait for the HTTP server connection when requesting the drivers catalog during the Auto Apply Driver task sequence step. If the connection takes longer than the timeout setting, the request is cancelled. By default, the timeout is set to 60 seconds.|  
|SMSTSDriverRequestReceiveTimeOut|Use this variable to specify the number of seconds to wait for a response for a drivers catalog request during the Auto Apply Driver task sequence step. If the connection takes longer than the timeout setting, the request is cancelled. By default, the timeout is set to 480 seconds.|
|SMSTSDriverRequestResolveTimeOut|Use this variable to specify the number of seconds to wait for HTTP name resolution when for a driver catalog request during the Auto Apply Driver task sequence step. If the connection takes longer than the timeout setting, the request is cancelled. By default, the timeout is set to 60 seconds.|
|SMSTSDriverRequestSendTimeOut|Use this variable to specify the number of seconds to use when sending a driver catalog request during the Auto Apply Driver task sequence step. If the request takes longer than the timeout setting, the request is cancelled. By default, the timeout is set to 60 seconds.|
|SMSTSErrorDialogTimeout|When an error occurs in a task sequence, a dialog box is displayed that is automatically dismissed after a number of seconds specified by this variable. By default, the dialog box is automatically dismissed after **900** seconds (15 minutes).|  
| TSDisableProgressUI | Use this variable to hide or display task sequence progress in different sections of the task sequence. | 
|TSErrorOnWarning|Use this variable to specify whether the task sequence engine considers a detected warning as an error during the Application Installation task sequence step. The task sequence sets the _TSAppInstallStatus variable to **Warning** when one or more applications, or a required dependency, did not install because a requirement was not met. When you set the TSErrorOnWarning variable to **True** and the _TSAppInstallStatus variable is set to Warning, it is treated as an error. A value of **False** is the default behavior.| 
|SMSTSLanguageFolder|Use this variable to change the display language of a language neutral boot image.|  
|SMSTSLocalDataDrive|Specifies where temporary files are stored on the destination computer while the task sequence is running.<br /><br /> This variable must be set before the task sequence starts, such as by setting a collection variable. Once the task sequence starts, Configuration Manager defines the _SMSTSMDataPath variable once the Task Sequence starts.|  
|SMSTSMP|Use this variable to specify the URL or IP address of the Configuration Manager management point.|  
|SMSTSMPListRequestTimeout|Use this variable to specify how many milliseconds a task sequence waits before it retries to install an application or software update after it fails to retrieve the management point list from location services. By default, the task sequence waits 60,000 milliseconds (60 seconds) before it retries the step, and retries up to three times. This variable is applicable only to the Install Application and Install Software Updates task sequence steps.|  
|SMSTSMPListRequestTimeoutEnabled|Use this variable to enable repeated MPList requests to refresh the client if the client is not on the Intranet. <br />By default, this variable is set to True. When clients are on the internet, you can set this variable to False to avoid unnecessary delays. This variable is applicable only to the Install Application and Install Software Updates  task sequence steps.|  
|SMSTSPeerDownload|Use this variable to enable the client to use Windows PE Peer Cache.<br /><br /> Example:<br /><br /> SMSTSPeerDownload  = **TRUE** enables this functionality.|  
|SMSTSPeerRequestPort|Use this variable for Windows PE peer cache to specify a custom network port to use for the initial broadcast when you do not use the default ports configured in the Client Settings (8004).|  
|SMSTSPersistContent|Use this variable to temporarily persist content in the task sequence cache.|  
|SMSTSPostAction|Specifies a command that is run after the task sequence completes. For example, you can use this variable to specify a script that enables write filters on embedded devices after the task sequence deploys an operating system to the device.|  
|SMSTSPreferredAdvertID|Forces a specific targeted deployment on the destination computer to be run. This can be set through a prestart command from media or PXE. If this variable is set, the task sequence overrides any required deployments.|  
|SMSTSPreserveContent|This variable flags the content in the task sequence to be retained in the Configuration Manager client cache after the deployment. This is different than using SMSTSPersistContent that only preserves the content for the duration of the task sequence and uses the task sequence cache, not the Configuration Manager client cache.<br /><br /> Example:<br /><br /> SMSTSPreserveContent = **TRUE** enables this functionality.|  
|SMSTSRebootDelay|Specifies how many seconds to wait before the computer restarts. The task sequence manager will display a notification dialog before reboot if this variable is not set to 0.<br /><br /> Examples:<br /><br /> **0**<br /><br /> **30**|  
|SMSTSRebootMessage|Specifies the message to display in the shutdown dialog box when a restart is requested. If this variable is not set, a default message will appear.<br /><br /> Example:<br /><br /> **This computer is being restarted by the task sequence manager**.|  
|SMSTSRebootRequested|Indicates that a restart is requested after the current task sequence step is completed. If a restart is required, just set this variable to **true**, and the task sequence manager will restart the computer after this task sequence step. The task sequence step must set this task sequence variable if it requires the restart to complete the task sequence step. After the computer is restarted, the task sequence will continue to run from the next task sequence step.|  
|SMSTSRetryRequested|Requests a retry after the current task sequence step is completed. If this task sequence variable is set, the **SMSTSRebootRequested** must also be set to **true**. After the computer is restarted, the task sequence manager will rerun the same task sequence step.|  
|SMSTSSoftwareUpdateScanTimeout| Gives you the ability to control the timeout in seconds for the software updates scan during the [Install Software Updates](task-sequence-steps.md#BKMK_InstallSoftwareUpdates) task sequence step. For example, you might increase the default value if you have a lot of software updates to install. The default value is 30 minutes. |
|SMSTSUDAUsers|Specifies the primary user of the destination computer. Specify the users by using the following format. Separate multiple users by using a comma (,).<br /><br /> Example:<br /><br /> **domain\user1, domain\user2, domain\user3**<br /><br /> For more information about associating users with the destination computer, see [Associate users with a destination computer](../get-started/associate-users-with-a-destination-computer.md).|  
|SMSTSWaitForSecondReboot|Beginning in Configuration Manager version 1602, this optional task sequence variable is available to help control client behavior when a software update installation requires two restarts. This variable must be set before the [Install Software Updates](task-sequence-steps.md#BKMK_InstallSoftwareUpdates) step to prevent a task sequence from failing because of a second restart from software update installation.<br /><br /> Set the SMSTSWaitForSecondReboot value in seconds to specify how long the task sequence pauses during the Install Software Updates step when the computer restarts to allow sufficient time in case there is a second restart. <br />For example, if you set SMSTSWaitForSecondReboot to 600, the task sequence is paused for 10 minutes after a restart before additional task sequence steps run. This is useful when hundreds of software updates are installed in a single Install Software Updates task sequence step.|  
